{
  "launch_templates": [
    {
      "name": "Production-Web-Template",
      "description": "Launch template for Production Web Tier instances",
      "image_id": "ami-0c02fb55956c7d316",
      "instance_type": "t3.micro",
      "key_name": "vpc-case-study-key",
      "security_group_ids": ["Production-Web-SG"],
      "user_data": {
        "script": "#!/bin/bash\nyum update -y\nyum install -y httpd\nsystemctl start httpd\nsystemctl enable httpd\necho '<h1>Production Web Server</h1>' > /var/www/html/index.html\necho '<p>Instance ID: ' $(curl -s http://169.254.169.254/latest/meta-data/instance-id) '</p>' >> /var/www/html/index.html\necho '<p>Availability Zone: ' $(curl -s http://169.254.169.254/latest/meta-data/placement/availability-zone) '</p>' >> /var/www/html/index.html"
      },
      "tag_specifications": [
        {
          "resource_type": "instance",
          "tags": {
            "Name": "Production-Web-Template",
            "Environment": "Production",
            "Tier": "Web"
          }
        }
      ]
    },
    {
      "name": "Production-App-Template",
      "description": "Launch template for Production Application Tier instances",
      "image_id": "ami-0c02fb55956c7d316",
      "instance_type": "t3.micro",
      "key_name": "vpc-case-study-key",
      "security_group_ids": ["Production-App-SG"],
      "user_data": {
        "script": "#!/bin/bash\nyum update -y\nyum install -y java-11-amazon-corretto\necho 'Application Server Started' > /var/log/app-server.log\necho 'Instance ID: ' $(curl -s http://169.254.169.254/latest/meta-data/instance-id) >> /var/log/app-server.log"
      },
      "tag_specifications": [
        {
          "resource_type": "instance",
          "tags": {
            "Name": "Production-App-Template",
            "Environment": "Production",
            "Tier": "Application"
          }
        }
      ]
    },
    {
      "name": "Production-Cache-Template",
      "description": "Launch template for Production Cache Tier instances",
      "image_id": "ami-0c02fb55956c7d316",
      "instance_type": "t3.micro",
      "key_name": "vpc-case-study-key",
      "security_group_ids": ["Production-Cache-SG"],
      "user_data": {
        "script": "#!/bin/bash\nyum update -y\namazon-linux-extras install redis6 -y\nsystemctl start redis\nsystemctl enable redis\necho 'Cache Server Started' > /var/log/cache-server.log"
      },
      "tag_specifications": [
        {
          "resource_type": "instance",
          "tags": {
            "Name": "Production-Cache-Template",
            "Environment": "Production",
            "Tier": "Cache"
          }
        }
      ]
    },
    {
      "name": "Production-DB-Template",
      "description": "Launch template for Production Database Tier instances",
      "image_id": "ami-0c02fb55956c7d316",
      "instance_type": "t3.micro",
      "key_name": "vpc-case-study-key",
      "security_group_ids": ["Production-DB-SG"],
      "user_data": {
        "script": "#!/bin/bash\nyum update -y\nyum install -y mysql-server\nsystemctl start mysqld\nsystemctl enable mysqld\necho 'Database Server Started' > /var/log/db-server.log"
      },
      "tag_specifications": [
        {
          "resource_type": "instance",
          "tags": {
            "Name": "Production-DB-Template",
            "Environment": "Production",
            "Tier": "Database"
          }
        }
      ]
    },
    {
      "name": "Development-Web-Template",
      "description": "Launch template for Development Web Tier instances",
      "image_id": "ami-0c02fb55956c7d316",
      "instance_type": "t2.micro",
      "key_name": "vpc-case-study-key",
      "security_group_ids": ["Dev-Web-SG"],
      "user_data": {
        "script": "#!/bin/bash\nyum update -y\nyum install -y httpd\nsystemctl start httpd\nsystemctl enable httpd\necho '<h1>Development Web Server</h1>' > /var/www/html/index.html\necho '<p>Instance ID: ' $(curl -s http://169.254.169.254/latest/meta-data/instance-id) '</p>' >> /var/www/html/index.html\necho '<p>Environment: Development</p>' >> /var/www/html/index.html"
      },
      "tag_specifications": [
        {
          "resource_type": "instance",
          "tags": {
            "Name": "Development-Web-Template",
            "Environment": "Development",
            "Tier": "Web"
          }
        }
      ]
    },
    {
      "name": "Development-DB-Template",
      "description": "Launch template for Development Database Tier instances",
      "image_id": "ami-0c02fb55956c7d316",
      "instance_type": "t2.micro",
      "key_name": "vpc-case-study-key",
      "security_group_ids": ["Dev-DB-SG"],
      "user_data": {
        "script": "#!/bin/bash\nyum update -y\nyum install -y mysql-server\nsystemctl start mysqld\nsystemctl enable mysqld\necho 'Development Database Server Started' > /var/log/db-server.log"
      },
      "tag_specifications": [
        {
          "resource_type": "instance",
          "tags": {
            "Name": "Development-DB-Template",
            "Environment": "Development",
            "Tier": "Database"
          }
        }
      ]
    }
  ]
}
